<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade" />
  <meta name="github" content="https://github.com/Aoudumber-Bade" />
  <title>Mehwish Birthday</title>

  <!-- CSS g·ªëc c·ªßa b·∫°n -->
  <link rel="stylesheet" href="style.css" />

  <!-- Icon + Fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

  <!-- jQuery (ƒë·ªÉ code g·ªëc c·ªßa b·∫°n d√πng) -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>

  <!-- ============ CSS B·ªî SUNG: PIN + GIFTS + MODAL + PH√ÅO HOA ============ -->
  <style>
    /* N·ªÅn GIF cute (ch·ªâ b·∫≠t sau khi m·ªü kho√°) */
    #background-gif{
      position: fixed; inset: 0;
      background: url("images/cute-bg.gif") center/cover no-repeat; /* TODO: ƒë·ªïi ƒë∆∞·ªùng d·∫´n GIF n·∫øu c·∫ßn */
      opacity: .75;
      z-index: -1;
      display: none;
    }

    /* H·ªôp qu√† */
    #gift-boxes-area{
      position: fixed;
      left: 50%; bottom: -240px;                  /* b·∫Øt ƒë·∫ßu ·ªü d∆∞·ªõi ƒë√°y */
      transform: translateX(-50%);
      display: none;                               /* l·ªô di·ªán b·∫±ng JS */
      gap: 38px;
      z-index: 2000;
    }
    .gift-box{
      width: 68px; height: 88px;
      position: relative; cursor: pointer;
      animation: hb-float 3s ease-in-out infinite;
    }
    .gift-box:nth-child(2), .gift-box:nth-child(4){ margin-top: 12px; }
    .gift-box:nth-child(1), .gift-box:nth-child(3), .gift-box:nth-child(5){ margin-top: -6px; }
    .gift-box svg{ position:absolute; left:0 }
    .gift-box .box-lid{
      top:0; z-index:2;
      transition: transform .6s cubic-bezier(.61,1.2,.39,1.01);
    }
    .gift-box .box-body{
      top:28px; z-index:1;
      transition: filter .5s;
    }
    .gift-box.open .box-lid{
      transform: rotate(-42deg) translate(-10px,-38px) scale(1.15);
      filter: drop-shadow(0 6px 20px #f9b6cc77);
    }
    .gift-box.open .box-body{ filter: brightness(1.12); }

    @keyframes hb-float{
      0%{ transform: translateY(0); }
      50%{ transform: translateY(-18px); }
      100%{ transform: translateY(0); }
    }
    .hb-gift-appear{ animation: hb-riseUp 1.1s ease-out forwards; }
    @keyframes hb-riseUp{
      from{ transform: translate(-50%, 260px); opacity: 0; }
      to  { transform: translate(-50%, 0);   opacity: 1; }
    }

    /* Modal l·ªùi ch√∫c */
    #gift-modal{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.4);
      display: none;                               /* m·ªü b·∫±ng JS */
      align-items: center; justify-content: center;
      z-index: 3000;
    }
    #gift-modal-content{
      background:#fff0f7; color:#d1497a;
      border-radius: 18px; padding: 30px;
      min-width: 260px; text-align: center;
      font-family: 'Dancing Script', cursive; font-size: 1.4rem;
      position: relative; box-shadow: 0 3px 36px #e497af88;
    }
    #gift-modal-content img{ max-width: 200px; margin-bottom: 12px; display:block; }
    #gift-modal-close{ position:absolute; right:14px; top:10px; font-size:1.7rem; color:#f67280; cursor:pointer }

    /* Ph√°o hoa */
    #fireworks{ position: fixed; inset: 0; pointer-events: none; z-index: 4000; }

    /* Modal PIN */
    #pin-modal{
      position: fixed; inset: 0;
      background: rgba(255,240,230,.96);
      display: flex; align-items: center; justify-content: center;
      z-index: 9999;
    }
    .cute-pin-box{
      background:#ffe6ed; border:3.4px solid #e497af; border-radius:28px;
      box-shadow:0 4px 24px #e497af66;
      min-width:320px; min-height:340px;
      display:flex; flex-direction:column; align-items:center;
      padding:38px 28px 30px 28px;
    }
    .cute-pin-title{ font-family:'Dancing Script',cursive; font-size:2rem; margin-bottom:10px; }
    .cute-pin-dots{ display:flex; gap:15px; margin:12px 0 18px 0; }
    .cute-pin-dot{
      width:22px; height:22px; border-radius:50%;
      border:2.5px solid #e497af; background:#fff6fb; font-size:1.6rem; text-align:center;
    }
    .cute-pin-dot.filled{ background:#f67280; color:#fff; border-color:#d1497a; }
    .cute-pin-keypad{ display:grid; grid-template-columns:repeat(3,50px); grid-gap:14px; justify-content:center; }
    .cute-pin-key{
      border:2px solid #d1497a; border-radius:50%;
      height:50px; width:50px; font-size:1.5rem;
      background:#fff6fb; color:#d1497a; cursor:pointer;
    }
    .cute-pin-error{ color:#d1002c; font-size:1rem; margin-top:6px; display:none; }
  </style>
</head>

<body>
  <!-- ========== N·ªÄN GIF (·∫©n ƒë·∫øn khi m·ªü kh√≥a PIN) ========== -->
  <div id="background-gif"></div>

  <!-- ========== TRANG G·ªêC C·ª¶A B·∫†N (GI·ªÆ NGUY√äN) ========== -->
  <div id="wrapper">
    <div class="flag__birthday">
      <img src="./images/1.png" alt="" width="350" class="flag__left">
      <img src="./images/1.png" alt="" width="350" class="flag__right">
    </div>

    <div class="content">
      <div class="left">
        <div class="title">
          <h1 class="happy">
            <span style="--t: 4s;">H</span>
            <span style="--t: 4.2s;">a</span>
            <span style="--t: 4.4s;">p</span>
            <span style="--t: 4.6s;">p</span>
            <span style="--t: 4.8s;">y</span>
          </h1>
          <h1 class="birthday">
            <span style="--t: 5s;">B</span>
            <span style="--t: 5.2s;">i</span>
            <span style="--t: 5.4s;">r</span>
            <span style="--t: 5.6s;">t</span>
            <span style="--t: 5.8s;">h</span>
            <span style="--t: 6s;">d</span>
            <span style="--t: 6.2s;">a</span>
            <span style="--t: 6.4s;">y</span>
          </h1>
          <div class="hat">
            <img src="./images/hat.png" alt="" width="130">
          </div>
        </div>

        <div class="date__of__birth">
          <span></span>
        </div>

        <div class="btn">
          <button id="btn__letter">
            <div class="mail">
              Click Here Mehwish
              <i class="fa-regular fa-envelope"></i>
            </div>
          </button>
        </div>
      </div>

      <div class="right">
        <div class="box__account">
          <div class="image">
            <img src="./images/unnamed.png" alt="">
          </div>
          <div class="name">
            <i class="fa-solid fa-heart"></i>
            <span>Dear Mehwish</span>
            <i class="fa-solid fa-heart"></i>
          </div>
          <div class="balloon_one">
            <img width="100px" src="./images/balloon1.png" alt="">
          </div>
          <div class="balloon_two">
            <img width="100px" src="./images/balloon2.png" alt="">
          </div>
        </div>

        <div class="cricle">
          <div class="text__cricle">
            <span style="--i: 1;">h</span>
            <span style="--i: 2;">a</span>
            <span style="--i: 3;">p</span>
            <span style="--i: 4;">p</span>
            <span style="--i: 5;">y</span>
            <span style="--i: 6;">-</span>
            <span style="--i: 7;">b</span>
            <span style="--i: 8;">i</span>
            <span style="--i: 9;">r</span>
            <span style="--i: 10;">t</span>
            <span style="--i: 11;">h</span>
            <span style="--i: 12;">d</span>
            <span style="--i: 13;">a</span>
            <span style="--i: 14;">y</span>
            <span style="--i: 15;">-</span>
          </div>
          <i class="fa-solid fa-heart"></i>
        </div>
      </div>
    </div>

    <!-- C√°c ph·∫ßn trang tr√≠ (gi·ªØ nguy√™n) -->
    <div class="decorate_star star1" style="--t: 15s;"></div>
    <div class="decorate_star star2" style="--t: 15.2s;"></div>
    <div class="decorate_star star3" style="--t: 15.4s;"></div>
    <div class="decorate_star star4" style="--t: 15.6s;"></div>
    <div class="decorate_star star5" style="--t: 15.8s;"></div>
    <div class="decorate_flower--one" style="--t: 15s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--two" style="--t: 15.3s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--three" style="--t: 15.6s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_bottom">
      <img src="./images/decorate.png" alt="" width="100">
    </div>
    <div class="smiley__icon">
      <img src="./images/smiley_icon.png" alt="" width="100">
    </div>

    <!-- Box Mail (gi·ªØ nguy√™n) -->
    <div class="boxMail">
      <i class="fa-solid fa-xmark"></i>
      <div class="boxMail-container">
        <div class="card1">
          <div class="userImg">
            <img src="images/unnamed.png" alt="">
          </div>
          <h4 class="username">To: Mehwish üíñ<span class="underline"></span></h4>
          <h3>Happy Birthday</h3>
          <div class="imageCute">
            <img src="cute1.png" alt="">
          </div>
        </div>
        <div class="card2">
          <div class="card2-content">
            <h3>To You!</h3>
            <h2>
              Happy birthday ü•≥üéÇü•≥ chanda the day you come into my life I was not really much attached to
              you but day by day you became close to my heart . And now you are truly my younger sister. I
              wish I could remove some of the pain from your life which you are bearing alone. But you're
              always welcome ü§ó you can talk anytime you want to talk specially those which you can't say
              to others. And this year your all dreams come true . I wish that your
              brother could wish you but if couldn't wish on him behalf I am wishing you happy birthday
              üéàüéÇüéà sana . Don't be Sad ok be happy üòå
            </h2>
            <div class="imageCute2">
              <img src="cute2.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /Box Mail -->
  </div>
  <!-- /wrapper -->

  <!-- ========== H·ªòP QU√Ä (5 h·ªôp, ·∫£nh + l·ªùi ch√∫c) ========== -->
  <div id="gift-boxes-area">
    <div class="gift-box" data-msg="Ch√∫c b·∫°n lu√¥n h·∫°nh ph√∫c üíñ" data-img="images/balloon1.png"></div>
    <div class="gift-box" data-msg="Th√™m m·ªôt tu·ªïi m·ªõi, nhi·ªÅu ni·ªÅm vui üéÇ" data-img="images/cake.png"></div>
    <div class="gift-box" data-msg="Ch√∫c m·ªçi ƒëi·ªÅu t·ªët l√†nh üçÄ" data-img="images/clover.png"></div>
    <div class="gift-box" data-msg="Lu√¥n c∆∞·ªùi t∆∞∆°i nh√© üòä" data-img="images/smile.png"></div>
    <div class="gift-box" data-msg="Sinh nh·∫≠t r·ª±c r·ª° üéâ" data-img="images/party.png"></div>
  </div>

  <!-- MODAL L·ªúI CH√öC -->
  <div id="gift-modal">
    <div id="gift-modal-content">
      <span id="gift-modal-close">&times;</span>
      <img id="gift-modal-img" src="" alt="">
      <div id="gift-modal-message"></div>
    </div>
  </div>

  <!-- PH√ÅO HOA -->
  <canvas id="fireworks"></canvas>

  <!-- MODAL PIN -->
  <div id="pin-modal">
    <div class="cute-pin-box">
      <div class="cute-pin-title">Nh·∫≠p m√£ PIN</div>
      <div class="cute-pin-dots" id="pin-dots">
        <div class="cute-pin-dot"></div>
        <div class="cute-pin-dot"></div>
        <div class="cute-pin-dot"></div>
        <div class="cute-pin-dot"></div>
      </div>
      <div class="cute-pin-keypad" id="pin-keypad"></div>
      <div class="cute-pin-error" id="pin-error"></div>
    </div>
  </div>

  <!-- ========== SCRIPT G·ªêC (GI·ªÆ NGUY√äN) ========== -->
  <script>
    let datetxt = "27 May";
    let datatxtletter = "My love. You are a very special girl. I always silently thank you for coming into my life. Today, I wish you all the best, lots of health, and lots of joy. I always hope we will celebrate many more birthdays like this together. Happy birthday to you.üíï";
    let titleLetter = "To you";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p"); // n·∫øu d√πng h2, ƒë·ªïi selector n√†y cho kh·ªõp

    setTimeout(function () {
      timeDatetxt = setInterval(function () {
        if (currentIndex < charArrDate.length) {
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        }
        else {
          let i = document.createElement("i");
          i.className = "fa-solid fa-star"
          document.querySelector(".date__of__birth").prepend(i)
          document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
          clearInterval(timeDatetxt)
        }
      }, 100)
    }, 12000)

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function () {
      $(".box__letter").slideDown()
      setTimeout(function () {
        $(".letter__border").slideDown();
      }, 1000)
      setTimeout(function () {
        intervalTitle = setInterval(function () {
          if (currentIndexTitle < charArrTitle.length) {
            document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
            let i = document.createElement("i");
            i.className = "fa-solid fa-heart"
            document.querySelector(".title__letter").appendChild(i)
            currentIndexTitle++;
          }
          else {
            clearInterval(intervalTitle)
          }
        }, 100)
      }, 2000)
      setTimeout(function () {
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      }, 2800)
      setTimeout(function () {
        document.querySelectorAll(".heart").forEach((item) => {
          item.classList.add("animation")
        })
      }, 3500)
      setTimeout(function () {
        intervalContent = setInterval(function () {
          if (currentIndexLetter < charArrDateLetter.length) {
            text__letter.textContent += charArrDateLetter[currentIndexLetter];
            currentIndexLetter++;
          }
          else {
            clearInterval(intervalContent)
          }
        }, 50)
      }, 6000)
    })
    $(".close").on("click", function () {
      clearInterval(intervalContent)
      document.querySelector(".title__letter").textContent = "";
      text__letter.textContent = "";
      currentIndexLetter = 0
      currentIndexTitle = 0
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item) => {
        item.classList.remove("animation")
      })
      $(".box__letter").slideUp();
      $(".letter__border").slideUp();
    })

    let mailBox = document.querySelector('.mail')
    let boxmail = document.querySelector('.boxMail')
    var close = document.querySelector('.fa-xmark')
    mailBox.onclick = function () {
      mailBox.classList.toggle('active')
      boxmail.classList.add('active')
    }
    close.addEventListener('click', function () {
      boxmail.classList.remove('active')
    })
  </script>

  <!-- ========== SCRIPT B·ªî SUNG: GIFTS + FIREWORKS ========== -->
  <script>
    (function(){
      const area = document.getElementById('gift-boxes-area');
      const modal = document.getElementById('gift-modal');
      const modalImg = document.getElementById('gift-modal-img');
      const modalMsg = document.getElementById('gift-modal-message');
      const modalClose = document.getElementById('gift-modal-close');

      // ‚îÄ‚îÄ Ph√°o hoa
      const cvs = document.getElementById('fireworks');
      const ctx = cvs.getContext('2d');
      function fit(){ cvs.width = innerWidth; cvs.height = innerHeight; }
      fit(); addEventListener('resize', fit);

      let particles = [];
      function burst(x,y){
        for(let i=0;i<120;i++){
          particles.push({
            x,y, dx:(Math.random()-0.5)*6, dy:(Math.random()-0.5)*6,
            life:100, color:`hsl(${Math.random()*360},100%,50%)`
          });
        }
      }
      (function loopFW(){
        ctx.clearRect(0,0,cvs.width,cvs.height);
        for(let i=particles.length-1;i>=0;i--){
          const p=particles[i];
          p.x+=p.dx; p.y+=p.dy; p.life--;
          ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,2,2);
          if(p.life<=0) particles.splice(i,1);
        }
        requestAnimationFrame(loopFW);
      })();

      function renderGifts(){
        document.querySelectorAll('#gift-boxes-area .gift-box').forEach((box)=>{
          box.innerHTML = `
            <svg class="box-lid" width="68" height="40" viewBox="0 0 68 40">
              <rect x="5" y="13" width="58" height="18" rx="6" fill="#fd6fae" stroke="#c03" stroke-width="2"/>
              <rect x="25" y="3" width="18" height="12" rx="5" fill="#fff9c4" stroke="#c03" stroke-width="2"/>
              <rect x="39" y="3" width="4" height="11" rx="2" fill="#fd6fae"/>
              <rect x="25" y="3" width="4" height="11" rx="2" fill="#fd6fae"/>
            </svg>
            <svg class="box-body" width="68" height="60" viewBox="0 0 68 60">
              <rect x="5" y="0" width="58" height="45" rx="8" fill="#ffb7d5" stroke="#c03" stroke-width="2"/>
              <rect x="31" y="0" width="6" height="45" fill="#fff9c4"/>
            </svg>
          `;
          box.addEventListener('click', (ev)=>{
            document.querySelectorAll('.gift-box.open').forEach(b=>b.classList.remove('open'));
            box.classList.add('open');
            const r = cvs.getBoundingClientRect();
            burst(ev.clientX - r.left, ev.clientY - r.top);
            setTimeout(()=>{
              modalImg.src = box.dataset.img || '';
              modalMsg.textContent = box.dataset.msg || 'Happy Birthday!';
              modal.style.display = 'flex';
            },650);
          });
        });
      }
      modalClose.addEventListener('click', ()=>{
        modal.style.display='none';
        document.querySelectorAll('.gift-box.open').forEach(b=>b.classList.remove('open'));
      });

      window.HB_Gifts = {
        init(){ renderGifts(); },
        show(){
          area.style.display = 'flex';
          area.classList.add('hb-gift-appear');
        }
      };
    })();
  </script>

  <!-- ========== SCRIPT B·ªî SUNG: MODAL PIN ========== -->
  <script>
    (function(){
      const pinModal = document.getElementById('pin-modal');
      const pinDots = Array.from(document.querySelectorAll('#pin-dots .cute-pin-dot'));
      const pinKeypad = document.getElementById('pin-keypad');
      const pinError = document.getElementById('pin-error');
      let entered = '', correct = '1010', cb = ()=>{};

      const KEYS = ["1","2","3","4","5","6","7","8","9","del","0","ok"];
      function renderKeys(){
        KEYS.forEach(k=>{
          const b=document.createElement('button');
          b.className='cute-pin-key';
          b.textContent = (k==="del"?"‚å´":(k==="ok"?"OK":k));
          b.onclick = ()=>{
            if(k==='del'){ entered = entered.slice(0,-1); updateDots(); pinError.style.display='none'; }
            else if(k==='ok'){ check(); }
            else if(entered.length<4){ entered+=k; updateDots(); if(entered.length===4) setTimeout(check,180); }
          };
          pinKeypad.appendChild(b);
        });
      }
      function updateDots(){
        pinDots.forEach((d,i)=>{ d.textContent = entered[i] ? '‚Ä¢' : ''; d.classList.toggle('filled', !!entered[i]); });
      }
      function check(){
        if(entered===correct){
          pinModal.style.display='none';
          cb && cb();
        }else{
          pinError.textContent='Sai m√£ PIN r·ªìi üò≥';
          pinError.style.display='block';
          entered=''; updateDots();
        }
      }

      window.HB_Pin = {
        require(opt={}){
          correct = opt.pin || correct;                     // TODO: ƒë·ªïi m√£ PIN t·∫°i ƒë√¢y n·∫øu mu·ªën
          cb = typeof opt.onUnlock==='function' ? opt.onUnlock : cb;
          pinModal.style.display='flex';
          entered=''; updateDots();
        }
      };

      renderKeys(); updateDots();
    })();
  </script>

  <!-- ========== K√çCH HO·∫†T: PIN ‚Üí SHOW GIF ‚Üí CH·∫†Y G·ªêC ‚Üí H·ªòP QU√Ä BAY L√äN ========== -->
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      // Kh·ªüi t·∫°o h·ªôp qu√† (g·∫Øn SVG + click)
      HB_Gifts.init();

      // B·∫Øt bu·ªôc nh·∫≠p PIN tr∆∞·ªõc
      HB_Pin.require({
        pin: '1010', // <<== TODO: m√£ PIN b·∫°n mu·ªën
        onUnlock: function(){
          // B·∫≠t n·ªÅn GIF cute
          document.getElementById('background-gif').style.display = 'block';

          // Sau khi ng∆∞·ªùi xem m·ªü kho√°, ƒë·ª£i ~12s (kh·ªõp animation g·ªëc) r·ªìi cho h·ªôp qu√† bay l√™n
          setTimeout(() => HB_Gifts.show(), 12000);
        }
      });
    });
  </script>
</body>
</html>
