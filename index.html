<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade" />
  <meta name="github" content="https://github.com/Aoudumber-Bade" />
  <title>Mehwish Birthday</title>

  <!-- CSS gốc -->
  <link rel="stylesheet" href="style.css" />
  <!-- NGAY SAU link style.css -->
<style>
  /* Tắt hoàn toàn nền caro từ style.css */
  html, body {
    background: transparent !important;
  }
  #wrapper{
    background: none !important;
    background-image: none !important;
    background-size: initial !important;
  }
  /* Phòng khi có pseudo-element vẽ caro */
  #wrapper::before, #wrapper::after, body::before{
    content: none !important;
    background: none !important;
  }

  /* Nếu muốn nền GIF hiển thị ngay */
  #background-gif{
    position: fixed; inset: 0;
    background: url("https://i.pinimg.com/originals/b4/58/1d/b4581df9e47ce538d21555c94f75da95.gif")
                center/cover no-repeat fixed;
    opacity: .85;
    z-index: -1;
    display: block;        /* hiện ngay */
    pointer-events: none;
  }
</style>


  <!-- Icon + Fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>

  <!-- ===== CSS BỔ SUNG: NỀN GIF + TẮT CARO + PIN + GIFTS + MODAL + PHÁO HOA ===== -->
  <style>
    /* ==== HIỆN NỀN GIF NGAY ==== */
    #background-gif{
      position: fixed; inset: 0;
      background: url("https://i.pinimg.com/originals/b4/58/1d/b4581df9e47ce538d21555c94f75da95.gif")
                  center / cover no-repeat fixed;
      opacity: .85;
      z-index: -1;
      display: block;         /* hiển thị ngay */
      pointer-events: none;   /* không chặn click */
    }

    /* ==== GỠ NỀN Ô CARO từ style.css (wrapper + body) ==== */
    html, body{ background: transparent !important; }
    #wrapper{
      background: none !important;
      background-image: none !important;
    }
    #wrapper::before, #wrapper::after, body::before{
      content: none !important;
      background: none !important;
    }

    /* ===== GIF pixel ở chân màn (hiện cùng lúc hộp quà) ===== */
    #bottom-gif{
      position: fixed;
      bottom: 16px; left: 50%;
      transform: translateX(-50%);
      width: min(560px, 60vw);
      z-index: 1;
      display: none;
      pointer-events: none;
      opacity: .95;
      image-rendering: pixelated;
    }

    /* ===== 5 HỘP QUÀ LƠ LỬNG (dùng PNG của bạn) ===== */
    #gift-boxes-area{
      position: fixed;
      left: 50%; top: 64%;
      transform: translateX(-50%);
      display: none;
      gap: 48px;
      z-index: 10;
    }
    .gift-box{
      width: 120px; height: 120px;
      position: relative; cursor: pointer;
      display: grid; place-items: center;
      animation: gfloat 3.2s ease-in-out infinite;
      transition: transform .2s cubic-bezier(.44,1.5,.55,1.11);
      will-change: transform;
    }
    .gift-box:nth-child(2), .gift-box:nth-child(4){ margin-top: 14px; }
    .gift-box:nth-child(1), .gift-box:nth-child(3), .gift-box:nth-child(5){ margin-top: -8px; }

    .gift-box img.gift-img{
      width: 100%; height: auto; display: block;
      filter: drop-shadow(0 10px 24px rgba(255,135,155,.35));
      user-select: none; -webkit-user-drag: none;
    }
    .gift-box:active{ transform: scale(1.06); }
    .gift-box.open{ transform: scale(1.18) translateY(-8px) rotate(-2deg); }

    @keyframes gfloat{ 0%{transform:translateY(0)} 50%{transform:translateY(-18px)} 100%{transform:translateY(0)} }
    .gift-appear{ animation: riseUp .9s ease-out forwards }
    @keyframes riseUp{ from{transform:translate(-50%,220px);opacity:0} to{transform:translate(-50%,0);opacity:1} }

    /* ===== Modal lời chúc ===== */
    #gift-modal{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.4);
      display: none; align-items: center; justify-content: center;
      z-index: 3000;
    }
    #gift-modal-content{
      background:#fff0f7; color:#d1497a;
      border-radius: 18px; padding: 30px;
      min-width: 260px; text-align: center;
      font-family: 'Dancing Script', cursive; font-size: 1.5rem;
      position: relative; box-shadow: 0 3px 36px #e497af88;
    }
    #gift-modal-content img{ max-width: 220px; margin-bottom: 12px; display:block; margin-inline:auto }
    #gift-modal-close{ position:absolute; right:14px; top:10px; font-size:1.7rem; color:#f67280; cursor:pointer }

    /* ===== Pháo hoa ===== */
    #fireworks{ position: fixed; inset: 0; pointer-events: none; z-index: 4000; }

    /* ===== Modal PIN ===== */
    #pin-modal{
      position: fixed; inset: 0;
      background: rgba(255,240,230,.96);
      display: flex; align-items: center; justify-content: center;
      z-index: 9999;
    }
    .cute-pin-box{
      background:#ffe6ed; border:3.4px solid #e497af; border-radius:28px;
      box-shadow:0 4px 24px #e497af66;
      min-width:320px; min-height:340px;
      display:flex; flex-direction:column; align-items:center;
      padding:38px 28px 30px 28px;
      color:#d1497a;
    }
    .cute-pin-title{ font-family:'Dancing Script',cursive; font-size:2rem; margin-bottom:10px; }
    .cute-pin-dots{ display:flex; gap:15px; margin:12px 0 18px 0; }
    .cute-pin-dot{
      width:22px; height:22px; border-radius:50%;
      border:2.5px solid #e497af; background:#fff6fb; font-size:1.6rem; text-align:center;
    }
    .cute-pin-dot.filled{ background:#f67280; color:#fff; border-color:#d1497a; }
    .cute-pin-keypad{ display:grid; grid-template-columns:repeat(3,50px); grid-gap:14px; justify-content:center; }
    .cute-pin-key{
      border:2px solid #d1497a; border-radius:50%;
      height:50px; width:50px; font-size:1.5rem;
      background:#fff6fb; color:#d1497a; cursor:pointer;
    }
    .cute-pin-error{ color:#d1002c; font-size:1rem; margin-top:6px; display:none; }

    /* Mobile tweak */
    @media (max-width:768px){
      #gift-boxes-area{ top: 70%; gap: 18px; }
      .gift-box{ width: 78px; height: 78px; }
      .gift-box:nth-child(2), .gift-box:nth-child(4){ margin-top: 8px; }
      .gift-box:nth-child(1), .gift-box:nth-child(3), .gift-box:nth-child(5){ margin-top: -6px; }
    }
  </style>
</head>

<body>
  <!-- NỀN GIF -->
  <div id="background-gif"></div>
  <!-- GIF pixel ở chân màn -->
  <img id="bottom-gif" alt="pixel gif">

  <!-- ========== PHẦN GỐC (GIỮ NGUYÊN) ========== -->
  <div id="wrapper">
    <div class="flag__birthday">
      <img src="./images/1.png" alt="" width="350" class="flag__left">
      <img src="./images/1.png" alt="" width="350" class="flag__right">
    </div>

    <div class="content">
      <div class="left">
        <div class="title">
          <h1 class="happy">
            <span style="--t:4s;">H</span><span style="--t:4.2s;">a</span><span style="--t:4.4s;">p</span><span style="--t:4.6s;">p</span><span style="--t:4.8s;">y</span>
          </h1>
          <h1 class="birthday">
            <span style="--t:5s;">B</span><span style="--t:5.2s;">i</span><span style="--t:5.4s;">r</span><span style="--t:5.6s;">t</span><span style="--t:5.8s;">h</span><span style="--t:6s;">d</span><span style="--t:6.2s;">a</span><span style="--t:6.4s;">y</span>
          </h1>
          <div class="hat"><img src="./images/hat.png" alt="" width="130"></div>
        </div>

        <div class="date__of__birth"><span></span></div>

        <div class="btn">
          <button id="btn__letter">
            <div class="mail">Click Here Mehwish <i class="fa-regular fa-envelope"></i></div>
          </button>
        </div>
      </div>

      <div class="right">
        <div class="box__account">
          <div class="image"><img src="./images/unnamed.png" alt=""></div>
          <div class="name"><i class="fa-solid fa-heart"></i><span>Dear Mehwish</span><i class="fa-solid fa-heart"></i></div>
          <div class="balloon_one"><img width="100px" src="./images/balloon1.png" alt=""></div>
          <div class="balloon_two"><img width="100px" src="./images/balloon2.png" alt=""></div>
        </div>
        <div class="cricle">
          <div class="text__cricle">
            <span style="--i:1;">h</span><span style="--i:2;">a</span><span style="--i:3;">p</span><span style="--i:4;">p</span><span style="--i:5;">y</span>
            <span style="--i:6;">-</span><span style="--i:7;">b</span><span style="--i:8;">i</span><span style="--i:9;">r</span><span style="--i:10;">t</span><span style="--i:11;">h</span><span style="--i:12;">d</span><span style="--i:13;">a</span><span style="--i:14;">y</span><span style="--i:15;">-</span>
          </div>
          <i class="fa-solid fa-heart"></i>
        </div>
      </div>
    </div>

    <!-- Trang trí giữ nguyên -->
    <div class="decorate_star star1" style="--t: 15s;"></div>
    <div class="decorate_star star2" style="--t: 15.2s;"></div>
    <div class="decorate_star star3" style="--t: 15.4s;"></div>
    <div class="decorate_star star4" style="--t: 15.6s;"></div>
    <div class="decorate_star star5" style="--t: 15.8s;"></div>
    <div class="decorate_flower--one" style="--t: 15s;"><img width="20" src="./images/decorate_flower.png" alt=""></div>
    <div class="decorate_flower--two" style="--t: 15.3s;"><img width="20" src="./images/decorate_flower.png" alt=""></div>
    <div class="decorate_flower--three" style="--t: 15.6s;"><img width="20" src="./images/decorate_flower.png" alt=""></div>
    <div class="decorate_bottom"><img src="./images/decorate.png" alt="" width="100"></div>
    <div class="smiley__icon"><img src="./images/smiley_icon.png" alt="" width="100"></div>

    <!-- Hộp thư (giữ nguyên) -->
    <div class="boxMail">
      <i class="fa-solid fa-xmark"></i>
      <div class="boxMail-container">
        <div class="card1">
          <div class="userImg"><img src="images/unnamed.png" alt=""></div>
          <h4 class="username">To: Mehwish 💖<span class="underline"></span></h4>
          <h3>Happy Birthday</h3>
          <div class="imageCute"><img src="cute1.png" alt=""></div>
        </div>
        <div class="card2">
          <div class="card2-content">
            <h3>To You!</h3>
            <h2>
              Happy birthday 🥳🎂🥳 chanda the day you come into my life I was not really much attached to
              you but day by day you became close to my heart . And now you are truly my younger sister. I
              wish I could remove some of the pain from your life which you are bearing alone. But you're
              always welcome 🤗 you can talk anytime you want to talk specially those which you can't say
              to others. And this year your all dreams come true . I wish that your
              brother could wish you but if couldn't wish on him behalf I am wishing you happy birthday
              🎈🎂🎈 sana . Don't be Sad ok be happy 😌
            </h2>
            <div class="imageCute2"><img src="cute2.png" alt=""></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Thư (để khớp script gốc) -->
    <div class="box__letter" style="display:none;">
      <div class="letter__border" style="display:none;">
        <div class="close"><i class="fa-solid fa-xmark"></i></div>
        <div class="letter">
          <div class="title__letter"></div>
          <div class="content__letter">
            <div class="left">
              <img id="heart__letter" src="images/heart.png" alt="" />
              <i class="fa-solid fa-heart heart heart_1" style="--t:1s"></i>
              <i class="fa-solid fa-heart heart heart_2" style="--t:1.2s"></i>
              <i class="fa-solid fa-heart heart heart_3" style="--t:1.4s"></i>
              <i class="fa-solid fa-heart heart heart_4" style="--t:1.6s"></i>
            </div>
            <div class="right">
              <div class="love__img"><img src="images/love.png" alt="" /></div>
              <div class="text__letter"><p></p></div>
              <img id="mewmew" src="images/cat.png" alt="" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /Modal Thư -->
  </div>
  <!-- /wrapper -->

  <!-- ====== 5 HỘP QUÀ (dùng ảnh PNG hộp quà cute) ====== -->
  <div id="gift-boxes-area">
    <div class="gift-box" data-msg="Chúc bạn luôn hạnh phúc 💖" data-img="images/balloon1.png"></div>
    <div class="gift-box" data-msg="Thêm một tuổi mới, nhiều niềm vui 🎂" data-img="images/cake.png"></div>
    <div class="gift-box" data-msg="Chúc mọi điều tốt lành 🍀" data-img="images/clover.png"></div>
    <div class="gift-box" data-msg="Luôn cười tươi nhé 😊" data-img="images/smile.png"></div>
    <div class="gift-box" data-msg="Sinh nhật rực rỡ 🎉" data-img="images/party.png"></div>
  </div>

  <!-- Modal lời chúc -->
  <div id="gift-modal">
    <div id="gift-modal-content">
      <span id="gift-modal-close">&times;</span>
      <img id="gift-modal-img" src="" alt="">
      <div id="gift-modal-message"></div>
    </div>
  </div>

  <!-- Pháo hoa -->
  <canvas id="fireworks"></canvas>

  <!-- Modal PIN -->
  <div id="pin-modal">
    <div class="cute-pin-box">
      <div class="cute-pin-title">Nhập mã PIN</div>
      <div class="cute-pin-dots" id="pin-dots">
        <div class="cute-pin-dot"></div><div class="cute-pin-dot"></div><div class="cute-pin-dot"></div><div class="cute-pin-dot"></div>
      </div>
      <div class="cute-pin-keypad" id="pin-keypad"></div>
      <div class="cute-pin-error" id="pin-error"></div>
    </div>
  </div>

  <!-- ===== SCRIPT GỐC (GIỮ NGUYÊN) ===== -->
  <script>
    let datetxt="27 May";
    let datatxtletter="My love. You are a very special girl. I always silently thank you for coming into my life. Today, I wish you all the best, lots of health, and lots of joy. I always hope we will celebrate many more birthdays like this together. Happy birthday to you.💕";
    let titleLetter="To you";
    let charArrDate=datetxt.split(''),charArrDateLetter=datatxtletter.split(''),charArrTitle=titleLetter.split('');
    let currentIndex=0,currentIndexLetter=0,currentIndexTitle=0;
    let date__of__birth=document.querySelector(".date__of__birth span");
    let text__letter=document.querySelector(".text__letter p");

    setTimeout(function(){
      timeDatetxt=setInterval(function(){
        if(currentIndex<charArrDate.length){
          date__of__birth.textContent+=charArrDate[currentIndex]; currentIndex++;
        }else{
          let i=document.createElement("i"); i.className="fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i)
          document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
          clearInterval(timeDatetxt)
        }
      },100)
    },12000)

    var intervalContent,intervalTitle;
    $("#btn__letter").on("click",function(){
      $(".box__letter").slideDown();
      setTimeout(()=>{$(".letter__border").slideDown();},1000)
      setTimeout(function(){
        intervalTitle=setInterval(function(){
          if(currentIndexTitle<charArrTitle.length){
            document.querySelector(".title__letter").textContent+=charArrTitle[currentIndexTitle];
            let i=document.createElement("i"); i.className="fa-solid fa-heart";
            document.querySelector(".title__letter").appendChild(i)
            currentIndexTitle++;
          }else{ clearInterval(intervalTitle) }
        },100)
      },2000)
      setTimeout(function(){
        document.querySelector("#heart__letter")?.classList.add("animationOp");
        document.querySelector(".love__img")?.classList.add("animationOp");
        document.querySelector("#mewmew")?.classList.add("animationOp");
      },2800)
      setTimeout(function(){ document.querySelectorAll(".heart").forEach((item)=>{ item.classList.add("animation") }) },3500)
      setTimeout(function(){
        intervalContent=setInterval(function(){
          if(currentIndexLetter<charArrDateLetter.length){
            if(text__letter) text__letter.textContent+=charArrDateLetter[currentIndexLetter];
            currentIndexLetter++;
          }else{ clearInterval(intervalContent) }
        },50)
      },6000)
    })
    $(".close").on("click", function () {
      clearInterval(intervalContent)
      let tl=document.querySelector(".title__letter"); if(tl) tl.textContent="";
      if(text__letter) text__letter.textContent="";
      currentIndexLetter = 0; currentIndexTitle = 0;
      document.querySelector("#heart__letter")?.classList.remove("animationOp");
      document.querySelector(".love__img")?.classList.remove("animationOp");
      document.querySelector("#mewmew")?.classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item) => { item.classList.remove("animation") })
      $(".box__letter").slideUp(); $(".letter__border").slideUp();
    })

    let mailBox=document.querySelector('.mail'), boxmail=document.querySelector('.boxMail'), closeMail=document.querySelector('.boxMail .fa-xmark')
    mailBox?.addEventListener('click', function(){ mailBox.classList.toggle('active'); boxmail?.classList.add('active') })
    closeMail?.addEventListener('click', function(){ boxmail?.classList.remove('active') })
  </script>

  <!-- ===== SCRIPT BỔ SUNG: GIFTS + FIREWORKS ===== -->
  <script>
    /* ==== THAY ĐƯỜNG DẪN ẢNH TẠI ĐÂY ==== */
    const GIFT_IMAGE_SRC  = "images/gift-cute.png";          /* ảnh hộp quà PNG của bạn */
    const BOTTOM_GIF_SRC  = "images/pixel-christmas.gif";    /* gif chân màn (đặt file vào images/ hoặc đổi link trực tiếp) */

    (function(){
      const area = document.getElementById('gift-boxes-area');
      const modal = document.getElementById('gift-modal');
      const modalImg = document.getElementById('gift-modal-img');
      const modalMsg = document.getElementById('gift-modal-message');
      const modalClose = document.getElementById('gift-modal-close');
      const bottomGif = document.getElementById('bottom-gif');

      bottomGif.src = BOTTOM_GIF_SRC;

      // Pháo hoa
      const cvs = document.getElementById('fireworks');
      const ctx = cvs.getContext('2d');
      function fit(){ cvs.width=innerWidth; cvs.height=innerHeight }
      fit(); addEventListener('resize',fit);

      let particles=[];
      function burst(x,y){
        for(let i=0;i<120;i++){
          particles.push({x,y,dx:(Math.random()-0.5)*6,dy:(Math.random()-0.5)*6,life:100,color:`hsl(${Math.random()*360},100%,50%)`});
        }
      }
      (function loop(){
        ctx.clearRect(0,0,cvs.width,cvs.height);
        for(let i=particles.length-1;i>=0;i--){
          const p=particles[i]; p.x+=p.dx; p.y+=p.dy; p.life--;
          ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,2,2);
          if(p.life<=0) particles.splice(i,1);
        }
        requestAnimationFrame(loop);
      })();

      // Render 5 hộp quà = ảnh PNG
      function renderGifts(){
        document.querySelectorAll('#gift-boxes-area .gift-box').forEach((box)=>{
          box.innerHTML = `<img class="gift-img" src="${GIFT_IMAGE_SRC}" alt="gift">`;
          box.addEventListener('click',(ev)=>{
            document.querySelectorAll('.gift-box.open').forEach(b=>b.classList.remove('open'));
            box.classList.add('open');
            const r=cvs.getBoundingClientRect();
            burst(ev.clientX-r.left, ev.clientY-r.top);
            setTimeout(()=>{
              modalImg.src = box.dataset.img || '';
              modalMsg.textContent = box.dataset.msg || 'Happy Birthday!';
              modal.style.display='flex';
            },450);
          });
        });
      }
      modalClose.addEventListener('click',()=>{
        modal.style.display='none';
        document.querySelectorAll('.gift-box.open').forEach(b=>b.classList.remove('open'));
      });

      window.HB_Gifts = {
        init(){ renderGifts(); },
        show(){
          area.style.display='flex';
          area.classList.add('gift-appear');
          bottomGif.style.display='block'; // hiện GIF chân màn cùng lúc hộp quà
        }
      };
    })();
  </script>

  <!-- ===== SCRIPT BỔ SUNG: MODAL PIN ===== -->
  <script>
    (function(){
      const pinModal=document.getElementById('pin-modal');
      const pinDots=[...document.querySelectorAll('#pin-dots .cute-pin-dot')];
      const pinKeypad=document.getElementById('pin-keypad');
      const pinError=document.getElementById('pin-error');
      let entered='', correct='1010', onUnlock=()=>{};

      const KEYS=["1","2","3","4","5","6","7","8","9","del","0","ok"];
      function renderKeys(){
        KEYS.forEach(k=>{
          const b=document.createElement('button');
          b.className='cute-pin-key';
          b.textContent=(k==="del"?"⌫":(k==="ok"?"OK":k));
          b.onclick=()=>{
            if(k==='del'){ entered=entered.slice(0,-1); updateDots(); pinError.style.display='none'; }
            else if(k==='ok'){ check(); }
            else if(entered.length<4){ entered+=k; updateDots(); if(entered.length===4) setTimeout(check,160); }
          };
          pinKeypad.appendChild(b);
        });
      }
      function updateDots(){
        pinDots.forEach((d,i)=>{ d.textContent=entered[i]?'•':''; d.classList.toggle('filled',!!entered[i]); });
      }
      function check(){
        if(entered===correct){ pinModal.style.display='none'; onUnlock&&onUnlock(); }
        else{
          pinError.textContent="Sai mã PIN rồi 😳";
          pinError.style.display='block';
          entered=''; updateDots();
        }
      }
      window.HB_Pin={
        require(opt={}){
          correct=opt.pin||correct;
          onUnlock=typeof opt.onUnlock==='function'?opt.onUnlock:onUnlock;
          pinModal.style.display='flex';
          entered=''; updateDots();
        }
      };
      renderKeys(); updateDots();
    })();
  </script>

  <!-- ===== TRÌNH TỰ: PIN → (đợi animation gốc) → HỘP QUÀ ===== -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      HB_Gifts.init(); // khởi tạo hộp quà

      HB_Pin.require({
        pin: '1010',  // <<< đổi mã PIN tại đây
        onUnlock: function () {
          // Nền GIF đã hiển thị sẵn; chỉ cần show hộp quà sau animation gốc
          setTimeout(()=>HB_Gifts.show(), 12000);
        }
      });
    });
  </script>
</body>
</html>
