<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Birthday Surprise</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #ffeae0;
      overflow: hidden;
    }

    /* --- PIN Modal --- */
    #pin-modal {
      position: fixed;
      z-index: 3000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(255,240,230,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .pin-window {
      background: #fff0e8;
      border: 3px solid #ff7e85;
      border-radius: 18px;
      padding: 20px;
      min-width: 300px;
      text-align: center;
    }
    .pin-dots {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }
    .dot {
      width: 20px; height: 20px;
      border: 2px solid #ff7e85;
      border-radius: 50%;
      text-align: center;
      line-height: 20px;
      font-weight: bold;
      color: #ff7e85;
    }
    .dot.filled { background: #ff7e85; color: white; }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 60px);
      gap: 10px;
      justify-content: center;
    }
    .key {
      padding: 15px;
      border: 2px solid #ff7e85;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.2rem;
      background: white;
    }
    .key:active { background: #ff7e85; color: white; }

    #pin-error { color: red; margin-top: 10px; }

    /* --- Gift Boxes --- */
    #gift-area {
      position: fixed;
      bottom: -200px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 40px;
      z-index: 1000;
      display: none;
    }
    .gift-box {
      width: 80px;
      height: 100px;
      cursor: pointer;
      position: relative;
      animation: float 3s ease-in-out infinite;
      transition: transform 0.3s;
    }
    .gift-box svg { position: absolute; left: 0; right: 0; margin: auto; }
    .gift-box .lid { top: 0; transition: transform 0.6s; }
    .gift-box .body { bottom: 0; }
    .gift-box.open .lid { transform: rotate(-30deg) translate(-15px, -35px) scale(1.1); }

    @keyframes float {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    /* --- Gift Modal --- */
    #gift-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,220,230,0.7);
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    #gift-modal-content {
      background: #fff0f7;
      border: 3px solid #f67280;
      border-radius: 15px;
      padding: 20px;
      min-width: 250px;
      text-align: center;
      font-size: 1.2rem;
      color: #d1497a;
      position: relative;
    }
    #gift-modal-content img { max-width: 180px; margin-top: 10px; }
    #gift-modal-close {
      position: absolute; top: 10px; right: 15px;
      cursor: pointer; font-size: 1.5rem; color: #f67280;
    }
  </style>
</head>
<body>

<!-- PIN INPUT -->
<div id="pin-modal">
  <div class="pin-window">
    <h2>Nh·∫≠p m√£ PIN ƒë·ªÉ m·ªü qu√† üéÅ</h2>
    <div class="pin-dots">
      <div class="dot" id="d0"></div>
      <div class="dot" id="d1"></div>
      <div class="dot" id="d2"></div>
      <div class="dot" id="d3"></div>
    </div>
    <div class="keypad" id="keypad"></div>
    <div id="pin-error"></div>
  </div>
</div>

<!-- Gift Boxes -->
<div id="gift-area">
  <div class="gift-box" data-msg="Ch√∫c b·∫°n lu√¥n h·∫°nh ph√∫c üíñ" data-img="https://i.imgur.com/FK8qB6O.png"></div>
  <div class="gift-box" data-msg="Sinh nh·∫≠t r·ª±c r·ª° üéâ" data-img="https://i.imgur.com/6xVx5TA.png"></div>
  <div class="gift-box" data-msg="Mong b·∫°n lu√¥n m·ªâm c∆∞·ªùi üòä" data-img="https://i.imgur.com/k2nK4O2.png"></div>
</div>

<!-- Gift Modal -->
<div id="gift-modal">
  <div id="gift-modal-content">
    <span id="gift-modal-close">&times;</span>
    <div id="gift-message"></div>
    <img id="gift-img" src="" alt="">
  </div>
</div>

<script>
  // === PIN Logic ===
  const CORRECT_PIN = "1010";
  let pin = "";
  const dots = [document.getElementById("d0"), document.getElementById("d1"), document.getElementById("d2"), document.getElementById("d3")];
  const keypad = document.getElementById("keypad");
  const keys = ["1","2","3","4","5","6","7","8","9","del","0","ok"];
  keys.forEach(k=>{
    const btn=document.createElement("button");
    btn.className="key"; btn.textContent=k==="del"?"‚å´":k==="ok"?"OK":k;
    btn.onclick=()=>{
      if(k==="del") pin=pin.slice(0,-1);
      else if(k==="ok"){ if(pin===CORRECT_PIN){ unlockGifts(); } else { showError(); } }
      else if(pin.length<4) pin+=k;
      updateDots();
      if(pin.length===4 && pin!==CORRECT_PIN) showError();
      if(pin.length===4 && pin===CORRECT_PIN) unlockGifts();
    };
    keypad.appendChild(btn);
  });
  function updateDots(){
    dots.forEach((d,i)=>{d.textContent=pin[i]?"‚Ä¢":""; d.classList.toggle("filled",!!pin[i]);});
  }
  function showError(){
    document.getElementById("pin-error").textContent="Sai m√£ PIN! üò≥";
    pin=""; updateDots();
  }
  function unlockGifts(){
    document.getElementById("pin-modal").style.display="none";
    const area=document.getElementById("gift-area");
    area.style.display="flex";
    area.animate([{bottom:"-200px"},{bottom:"50%"}],{duration:1000,fill:"forwards"});
  }

  // === Gift Boxes ===
  document.querySelectorAll(".gift-box").forEach(box=>{
    box.innerHTML=`
      <svg class="lid" width="80" height="40"><rect x="5" y="5" width="70" height="20" rx="5" fill="#fd6fae"/></svg>
      <svg class="body" width="80" height="60"><rect x="5" y="0" width="70" height="50" rx="8" fill="#ffb7d5"/></svg>
    `;
    box.addEventListener("click",()=>{
      document.querySelectorAll(".gift-box.open").forEach(b=>b.classList.remove("open"));
      box.classList.add("open");
      setTimeout(()=>{
        document.getElementById("gift-message").textContent=box.dataset.msg;
        document.getElementById("gift-img").src=box.dataset.img;
        document.getElementById("gift-modal").style.display="flex";
      },600);
    });
  });

  document.getElementById("gift-modal-close").onclick=()=>document.getElementById("gift-modal").style.display="none";
  document.getElementById("gift-modal").onclick=(e)=>{if(e.target.id==="gift-modal") e.target.style.display="none";}
</script>

</body>
</html>
