<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mehwish Birthday</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    crossorigin="anonymous"></script>
  <style>
    body {
      margin: 0;
      background: #ffeae0;
      overflow: hidden;
      font-family: 'Poppins', sans-serif;
    }

    /* ========== BACKGROUND GIF ========== */
    #background-gif {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/cute-bg.gif") center/cover repeat;
      opacity: 0.7;
      z-index: -1;
      display: none;
    }

    /* ========== GIFT BOXES ========== */
    #gift-boxes-area {
      position: fixed;
      left: 50%;
      top: 70%;
      transform: translateX(-50%);
      display: none;
      gap: 38px;
      z-index: 10;
      opacity: 0;
    }

    .gift-box {
      width: 80px;
      height: 100px;
      position: relative;
      cursor: pointer;
      animation: float 3s ease-in-out infinite;
      transform-origin: bottom center;
    }

    .box-body {
      width: 100%;
      height: 70%;
      background: linear-gradient(135deg, #ffb6d5, #ff80ab);
      border-radius: 8px;
      position: absolute;
      bottom: 0;
      left: 0;
      border: 3px solid #d14780;
    }

    .box-lid {
      width: 110%;
      height: 40%;
      background: #fd6fae;
      border-radius: 6px;
      position: absolute;
      top: -20px;
      left: -5%;
      border: 3px solid #d14780;
      transition: transform 0.6s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .box-lid::after {
      content: "üéÄ";
      font-size: 1.3rem;
    }

    .gift-box.open .box-lid {
      transform: rotate(-35deg) translate(-20px, -40px) scale(1.2);
    }

    @keyframes float {
      0% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-15px);
      }

      100% {
        transform: translateY(0);
      }
    }

    #gift-boxes-area.show {
      animation: rise 1s ease-out forwards;
    }

    @keyframes rise {
      from {
        top: 100%;
        opacity: 0;
      }

      to {
        top: 55%;
        opacity: 1;
      }
    }

    /* sparkle */
    .sparkle {
      position: absolute;
      width: 20px;
      height: 20px;
      background: url('https://cdn-icons-png.flaticon.com/512/616/616408.png') no-repeat center/contain;
      opacity: 0;
      animation: sparkleAnim 1s ease forwards;
    }

    @keyframes sparkleAnim {
      from {
        transform: scale(0.5) rotate(0);
        opacity: 0;
      }

      to {
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
      }
    }

    /* MODAL L·ªúI CH√öC */
    #gift-modal {
      position: fixed;
      z-index: 3000;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
    }

    #gift-modal .modal-content {
      background: #fff0f7;
      border-radius: 18px;
      padding: 36px 28px;
      text-align: center;
      font-family: 'Dancing Script';
      font-size: 1.6rem;
      color: #d1497a;
      position: relative;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    #gift-modal .close-btn {
      position: absolute;
      top: 10px;
      right: 14px;
      font-size: 1.8rem;
      cursor: pointer;
      color: #f67280;
    }

    /* CANVAS PH√ÅO HOA */
    #fireworks {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2000;
    }
  </style>
</head>

<body>

  <!-- Background gif -->
  <div id="background-gif"></div>

  <!-- GI·ªÆ NGUY√äN N·ªòI DUNG G·ªêC -->
  <div id="wrapper">
    <!-- (nguy√™n code Happy Birthday + boxMail + balloons nh∆∞ b·∫°n g·ª≠i) -->
    <!-- ... gi·ªØ nguy√™n to√†n b·ªô code wrapper c·ªßa b·∫°n ·ªü ƒë√¢y ... -->
  </div>

  <!-- GIFT BOXES -->
  <div id="gift-boxes-area">
    <div class="gift-box" data-msg="Ch√∫c b·∫°n lu√¥n h·∫°nh ph√∫c üíñ">
      <div class="box-body"></div>
      <div class="box-lid"></div>
    </div>
    <div class="gift-box" data-msg="Sinh nh·∫≠t vui v·∫ª üéÇ">
      <div class="box-body"></div>
      <div class="box-lid"></div>
    </div>
    <div class="gift-box" data-msg="M·ªçi ƒëi·ªÅu t·ªët l√†nh üçÄ">
      <div class="box-body"></div>
      <div class="box-lid"></div>
    </div>
    <div class="gift-box" data-msg="C∆∞·ªùi t∆∞∆°i c·∫£ ng√†y üòä">
      <div class="box-body"></div>
      <div class="box-lid"></div>
    </div>
    <div class="gift-box" data-msg="Tu·ªïi m·ªõi r·ª±c r·ª° üéâ">
      <div class="box-body"></div>
      <div class="box-lid"></div>
    </div>
  </div>

  <!-- MODAL L·ªúI CH√öC -->
  <div id="gift-modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <p id="modal-msg"></p>
    </div>
  </div>

  <!-- CANVAS FIREWORKS -->
  <canvas id="fireworks"></canvas>

  <!-- SCRIPT G·ªêC (animation ch·ªØ, boxMail, vv...) -->
  <script>
    /* === gi·ªØ nguy√™n script b·∫°n g·ª≠i === */
    /* ... code Happy Birthday + boxMail nh∆∞ b·∫°n c√≥ ... */
  </script>

  <!-- SCRIPT B·ªî SUNG H·ªòP QU√Ä -->
  <script>
    // Sau khi animation g·ªëc ch·∫°y ~12s th√¨ show h·ªôp qu√†
    setTimeout(() => {
      const gifts = document.getElementById('gift-boxes-area');
      gifts.style.display = "flex";
      gifts.classList.add("show");
    }, 12000);

    // Click h·ªôp qu√†
    document.querySelectorAll('.gift-box').forEach(box => {
      box.addEventListener('click', () => {
        box.classList.add('open');

        // Sparkle
        for (let i = 0; i < 5; i++) {
          let sp = document.createElement('div');
          sp.className = 'sparkle';
          sp.style.top = (Math.random() * 60 - 20) + "px";
          sp.style.left = (Math.random() * 60 + 20) + "px";
          box.appendChild(sp);
          setTimeout(() => sp.remove(), 1000);
        }

        // Modal + background gif + fireworks
        setTimeout(() => {
          document.getElementById('modal-msg').innerText = box.dataset.msg;
          document.getElementById('gift-modal').style.display = 'flex';
          document.getElementById('background-gif').style.display = 'block';
          launchFireworks();
        }, 700);
      });
    });

    // ƒê√≥ng modal
    document.querySelector('.close-btn').addEventListener('click', () => {
      document.getElementById('gift-modal').style.display = 'none';
      document.querySelectorAll('.gift-box.open').forEach(b => b.classList.remove('open'));
    });

    /* ==== FIREWORKS CANVAS ==== */
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    let particles = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    function random(min, max) { return Math.random() * (max - min) + min; }

    function createFirework(x, y) {
      const count = 100;
      for (let i = 0; i < count; i++) {
        particles.push({
          x, y,
          angle: random(0, Math.PI * 2),
          speed: random(2, 6),
          radius: random(2, 4),
          life: 100
        });
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p, i) => {
        const vx = Math.cos(p.angle) * p.speed;
        const vy = Math.sin(p.angle) * p.speed;
        p.x += vx; p.y += vy;
        p.life--;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = `hsla(${p.life * 3},100%,60%,${p.life / 100})`;
        ctx.fill();
        if (p.life <= 0) particles.splice(i, 1);
      });
      requestAnimationFrame(draw);
    }
    function launchFireworks() {
      createFirework(canvas.width / 2, canvas.height / 2);
    }
    draw();
  </script>
</body>
</html>
